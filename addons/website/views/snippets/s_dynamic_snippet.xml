<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="website.s_dynamic_snippet_template">
        <section t-attf-class="#{snippet_name} s_dynamic d-none pt24 pb24">
            <div class="container o_not_editable">
                <div class="css_non_editable_mode_hidden">
                    <div class="missing_option_warning alert alert-info rounded-0 fade show d-print-none">
                        Your Dynamic Snippet will be displayed here... This message is displayed because you did not provided both a filter and a template to use.<br/>
                    </div>
                </div>
                <div class="dynamic_snippet_template"/>
            </div>
        </section>
    </template>
    <template id="s_dynamic_snippet" name="Dynamic Snippet">
        <t t-call="website.s_dynamic_snippet_template">
            <t t-set="snippet_name" t-value="'s_dynamic_snippet'"/>
        </t>
    </template>
    <template id="website.s_dynamic_snippet_options_template">
        <div t-attf-data-js="#{snippet_name}" t-attf-data-selector="#{snippet_selector}" data-no-preview="true">
            <we-many2one string="Template"
                data-no-preview="true"
                data-model="ir.ui.view"
                data-fields='["display_name", "key"]'
                data-domain='[["key", "ilike", ".dynamic_filter_template_"], ["type", "=", "qweb"]]'
                data-attribute-name="templateKey"
                data-select-data-attribute=""
                data-call-with="key"/>
            <we-row data-name="snippet_filter_options">
                <!-- Currently doesn't account for website domain like it did previously. Should filters
                be website-specific? -->
                <we-many2one string="Filter"
                    data-no-preview="true"
                    data-name="filter_opt_select"
                    data-model="website.snippet.filter"
                    data-fields='["display_name", "limit"]'
                    data-select-data-attribute=""
                    data-attribute-name="filterId"/>
                <we-button data-name="filter_opt_edit" data-edit-filter="" class="fa fa-edit" data-no-preview="true" data-dependencies="filter_opt_select"/>
                <we-button data-name="filter_opt_create" data-create-filter="" class="fa fa-plus text-success" data-no-preview="true"/>
            </we-row>
            <!-- Controls creation and edition of snippet filters -->
            <div class="d-none" data-name="filter_customize_opt">
                <we-row string="Filter" class="o_we_full_row">
                    <we-input data-filter-name="" class="o_we_large_input flex-grow-1"/>
                    <we-button class="fa fa-check" data-save-filter="" title="Validate" data-no-preview="true"/>
                    <we-button class="fa fa-trash" data-delete-filter="" title="Delete" data-no-preview="true"/>
                </we-row>
                <!-- <we-many2one string="Model"
                    data-no-preview="true"
                    data-model="ir.model"
                    data-model=""/> -->
                <we-many2one string="Domain"
                    data-no-preview="true"
                    data-model="ir.filters"
                    data-ir-filter=""/>
            </div>

            <we-select string="Fetched elements" data-name="number_of_records_opt" data-attribute-name="numberOfRecords" data-no-preview="true">
                <t t-foreach="16" t-as="index">
                    <we-button t-att-data-select-data-attribute="index + 1"><t t-esc="index + 1"/></we-button>
                </t>
            </we-select>
            <we-title class="mt-2"><t t-esc="grouping_message"/></we-title>
            <we-select string="⌙ Normal devices" data-name="number_of_elements_opt" data-attribute-name="numberOfElements" data-no-preview="true">
                <we-button data-select-data-attribute="1">1</we-button>
                <we-button data-select-data-attribute="2">2</we-button>
                <we-button data-select-data-attribute="3">3</we-button>
                <we-button data-select-data-attribute="4">4</we-button>
                <we-button data-select-data-attribute="6">6</we-button>
            </we-select>
            <we-select string="⌙ Small devices" data-name="number_of_elements_small_devices_opt" data-attribute-name="numberOfElementsSmallDevices" data-no-preview="true">
                <we-button data-select-data-attribute="1">1</we-button>
                <we-button data-select-data-attribute="2">2</we-button>
                <we-button data-select-data-attribute="3">3</we-button>
            </we-select>
            <t t-raw="0"/>
        </div>
    </template>
    <template id="s_dynamic_snippet_options" inherit_id="website.snippet_options">
        <xpath expr="." position="inside">
            <t t-call="website.s_dynamic_snippet_options_template">
                <t t-set="snippet_name" t-value="'dynamic_snippet'"/>
                <t t-set="snippet_selector" t-value="'.s_dynamic_snippet'"/>
                <t t-set="grouping_message">Items per row</t>
            </t>
        </xpath>
    </template>
    <template id="assets_snippet_s_dynamic_snippet_css_000" inherit_id="website.assets_frontend">
        <xpath expr="//link[last()]" position="after">
            <link rel="stylesheet" type="text/scss" href="/website/static/src/snippets/s_dynamic_snippet/000.scss"/>
        </xpath>
    </template>
    <template id="assets_snippet_s_dynamic_snippet_js_000" inherit_id="website.assets_frontend">
        <xpath expr="//script[last()]" position="after">
            <script type="text/javascript" src="/website/static/src/snippets/s_dynamic_snippet/000.js"/>
        </xpath>
    </template>
</odoo>
