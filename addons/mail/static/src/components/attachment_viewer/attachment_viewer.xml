<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.AttachmentViewer" owl="1">
        <div class="o_AttachmentViewer d-flex flex-column align-items-center w-100 h-100" t-on-click="_onClick" t-on-keydown="_onKeydown" tabindex="0">
            <div class="o_AttachmentViewer_header d-flex w-100 bg-dark" t-on-click="_onClickHeader">
                <t t-if="attachmentViewer.attachment.fileType">
                    <div class="o_AttachmentViewer_headerItem o_AttachmentViewer_icon d-flex align-items-center ml-4 mr-2">
                        <t t-if="attachmentViewer.attachment.fileType === 'image'">
                            <i class="fa fa-picture-o" role="img" title="Image"/>
                        </t>
                        <t t-if="attachmentViewer.attachment.fileType === 'application/pdf'">
                            <i class="fa fa-file-text" role="img" title="PDF file"/>
                        </t>
                        <t t-if="attachmentViewer.attachment.isTextFile">
                            <i class="fa fa-file-text" role="img" title="Text file"/>
                        </t>
                        <t t-if="attachmentViewer.attachment.fileType === 'video'">
                            <i class="fa fa-video-camera" role="img" title="Video"/>
                        </t>
                    </div>
                </t>
                <div class="o_AttachmentViewer_headerItem o_AttachmentViewer_name d-flex align-items-center mx-2">
                    <span class="o_AttachmentViewer_nameText text-truncate" t-esc="attachmentViewer.attachment.displayName"/>
                </div>
                <div class="flex-grow-1"/>
                <div class="o_AttachmentViewer_buttonDownload o_AttachmentViewer_headerItem o_AttachmentViewer_headerItemButton px-3 d-flex align-items-center btn btn-dark border-0" t-on-click="_onClickDownload" role="button" title="Download">
                    <i class="o_AttachmentViewer_headerItemButtonIcon fa fa-download fa-fw mr-md-2" role="img"/>
                    <t t-if="env.messaging.device.sizeClass > env.device.SIZES.MD">
                        <span>Download</span>
                    </t>
                </div>
                <div class="o_AttachmentViewer_headerItem o_AttachmentViewer_headerItemButton o_AttachmentViewer_headerItemButtonClose px-3 d-flex align-items-center btn btn-dark border-0" t-on-click="_onClickClose" role="button" title="Close (Esc)" aria-label="Close">
                    <span class="h2 m-0 text-white">&#215;</span>
                </div>
            </div>

            <div class="o_AttachmentViewer_main d-flex align-items-center justify-content-center" t-att-class="{ 'overflow-hidden': attachmentViewer.attachment.fileType === 'image' }" t-on-mousemove="_onMousemoveView">
                <t t-if="attachmentViewer.attachment.fileType === 'image'">
                    <div class="o_AttachmentViewer_zoomer position-absolute w-100 h-100 d-flex align-items-center justify-content-center" t-ref="zoomer">
                        <t t-if="attachmentViewer.isImageLoading">
                            <div class="o_AttachmentViewer_loading position-absolute">
                                <i class="fa fa-3x fa-circle-o-notch fa-fw fa-spin" role="img" title="Loading"/>
                            </div>
                        </t>
                        <img class="o_AttachmentViewer_view o_AttachmentViewer_viewImage bg-black border-0 mw-100 mh-100" t-on-click="_onClickImage" t-on-mousedown="_onMousedownImage" t-on-wheel="_onWheelImage" t-on-load="_onLoadImage" t-att-src="attachmentViewer.attachment.defaultSource" t-att-style="imageStyle" draggable="false" alt="Viewer" t-key="'image_' + attachmentViewer.attachment.id" t-ref="image_{{ attachmentViewer.attachment.id }}"/>
                    </div>
                </t>
                <t t-if="attachmentViewer.attachment.fileType === 'application/pdf'">
                    <iframe class="o_AttachmentViewer_view o_AttachmentViewer_viewIframe o_AttachmentViewer_viewPdf bg-black border-0 h-100 shadow-lg" t-ref="iframeViewerPdf" t-att-class="{ 'w-100': env.messaging.device.isMobile }" t-att-src="attachmentViewer.attachment.defaultSource"/>
                </t>
                <t t-if="attachmentViewer.attachment.isTextFile">
                    <iframe class="o_AttachmentViewer_view o_AttachmentViewer_viewIframe bg-white border-0 o_text h-100 shadow-lg" t-att-src="attachmentViewer.attachment.defaultSource"/>
                </t>
                <t t-if="attachmentViewer.attachment.fileType === 'youtu'">
                    <iframe allow="autoplay; encrypted-media" class="o_AttachmentViewer_view o_AttachmentViewer_viewIframe o_AttachmentViewer_youtube bg-black border-0 h-100 shadow-lg" t-att-src="attachmentViewer.attachment.defaultSource" height="315" width="560"/>
                </t>
                <t t-if="attachmentViewer.attachment.fileType === 'video'">
                    <video class="o_AttachmentViewer_view o_AttachmentViewer_viewVideo bg-black border-0 shadow-lg" t-on-click="_onClickVideo" controls="controls" t-att-class="env.messaging.device.isMobile ? 'w-100 h-100' : 'h-75 w-75'" >
                        <source t-att-data-type="attachmentViewer.attachment.mimetype" t-att-src="attachmentViewer.attachment.defaultSource"/>
                    </video>
                </t>
            </div>
            <t t-if="attachmentViewer.attachment.fileType === 'image'">
                <div class="o_AttachmentViewer_toolbar btn-group bg-dark" role="toolbar">
                    <div class="o_AttachmentViewer_toolbarButton btn btn-dark" t-on-click="_onClickZoomIn" title="Zoom In (+)" role="button">
                        <i class="fa fa-fw fa-plus" role="img"/>
                    </div>
                    <div class="o_AttachmentViewer_toolbarButton btn btn-dark" t-att-class="{ disabled: attachmentViewer.scale === 1 }" t-on-click="_onClickZoomReset" role="button" title="Reset Zoom (0)">
                        <i class="fa fa-fw fa-search" role="img"/>
                    </div>
                    <div class="o_AttachmentViewer_toolbarButton btn btn-dark" t-att-class="{ disabled: attachmentViewer.scale === MIN_SCALE }" t-on-click="_onClickZoomOut" title="Zoom Out (-)" role="button">
                        <i class="fa fa-fw fa-minus" role="img"/>
                    </div>
                    <div class="o_AttachmentViewer_toolbarButton btn btn-dark mx-2" t-on-click="_onClickRotate" title="Rotate (r)" role="button">
                        <i class="fa fa-fw fa-repeat" role="img"/>
                    </div>
                    <div class="o_AttachmentViewer_toolbarButton btn btn-dark" t-on-click="_onClickPrint" title="Print" role="button">
                        <i class="fa fa-fw fa-print" role="img"/>
                    </div>
                    <div class="o_AttachmentViewer_buttonDownload o_AttachmentViewer_toolbarButton btn btn-dark ml-2" t-on-click="_onClickDownload" title="Download" role="button">
                        <i class="fa fa-download fa-fw" role="img"/>
                    </div>
                </div>
            </t>
            <div class="o_AttachmentViewer_Navigation d-flex justify-content-between px-4" t-if="attachmentViewer.attachments.length > 1">
                <div class="o_AttachmentViewer_buttonNavigation o_AttachmentViewer_buttonNavigationPrevious d-flex align-items-center justify-content-center btn btn-dark btn-lg rounded-circle" t-on-click="_onClickPrevious" title="Previous (Left-Arrow)" role="button">
                    <span class="fa fa-chevron-left" role="img"/>
                </div>
                <div class="o_AttachmentViewer_buttonNavigation o_AttachmentViewer_buttonNavigationNext d-flex align-items-center justify-content-center btn btn-dark btn-lg rounded-circle" t-on-click="_onClickNext" title="Next (Right-Arrow)" role="button">
                    <span class="fa fa-chevron-right" role="img"/>
                </div>
            </div>
        </div>
    </t>

</templates>
