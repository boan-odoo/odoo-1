<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="point_of_sale.CustomerFacingDisplayHead">
        <div class="resources">
            <base t-att-href="origin"/>
            <meta http-equiv="cache-control" content="no-cache" />
            <meta http-equiv="pragma" content="no-cache" />
            <link rel="stylesheet" type="text/css" href="/web/static/lib/bootstrap/css/bootstrap.css"/>
            <link rel="stylesheet" type="text/css" href="/web/static/lib/fontawesome/css/font-awesome.css"/>
            <link rel="stylesheet" type="text/css" href="/point_of_sale/static/src/css/customer_facing_display.css"/>
        </div>
    </t>

    <t t-name="point_of_sale.CustomerFacingDisplayOrder">
        <!-- Header -->
        <t t-call="point_of_sale.CustomerFacingDisplayHead"/>

        <t t-set="_orderTotals" t-value="model.getOrderTotals(order)" />

        <div class="pos-customer_facing_display pos-palette_01">
            <!-- Orderlines -->
            <div class="pos-customer_products" name="Products list">
                <t t-call="point_of_sale.CustomerFacingDisplayOrderLines"/>
            </div>

            <div class="pos-payment_info">
                <!-- Company Logo -->
                <div class="pos-company_logo"/>

                <div class="pos-payment_info_details">
                    <!-- Order TOtal -->
                    <div class="pos-total">
                        <div>
                            <span class="total-amount-formatting">TOTAL</span>
                        </div>
                        <div>
                            <span class="pos_total-amount" t-esc="model.formatCurrency(order and _orderTotals.withTaxWithDiscount or 0)"/>
                        </div>
                    </div>

                    <!-- Paymentlines -->
                    <t t-call="point_of_sale.CustomerFacingDisplayPaymentLines"/>

                    <!-- Odoo Logo -->
                    <div class="pos-odoo_logo_container"/>
                </div>
            </div>
        </div>
    </t>

    <t t-name="point_of_sale.CustomerFacingDisplayOrderLines">
        <div class="pos_orderlines">
            <div class="pos_orderlines_item pos_orderlines_header">
                <div/>
                <div/>
                <div>Quantity</div>
                <div>Price</div>
            </div>
            <div class="pos_orderlines_list">
                <t t-if="order">
                    <div t-foreach="model.getOrderlines(order)" t-as="_orderline" class="pos_orderlines_item">
                        <t t-set="_product" t-value="model.getRecord('product.product', _orderline.product_id)" />
                        <t t-set="_orderlinePrices" t-value="model.getOrderlinePrices(_orderline)" />
                        <div><div t-attf-style="background-image:url(#{_product._extras?.image_base64})"/></div>
                        <div t-esc="model.getFullProductName(_orderline)"/>
                        <div t-esc="model.getQuantityStr(_orderline)"/>
                        <div t-esc="model.formatCurrency(model.getOrderlineDisplayPrice(_orderlinePrices))"/>
                    </div>
                </t>
            </div>
        </div>
    </t>

    <t t-name="point_of_sale.CustomerFacingDisplayPaymentLines">
        <div class="pos-paymentlines">
            <t t-if="order">
                <t t-foreach="model.getPayments(order)" t-as="_payment">
                    <t t-set="_paymentMethod" t-value="model.getRecord('pos.payment.method', _payment.payment_method_id)" />
                    <div>
                        <span><t t-esc="_paymentMethod.name"/>:</span>
                    </div>
                    <div>
                        <span t-esc="model.formatCurrency(_payment.amount)"/>
                    </div>
                </t>
            </t>

            <div>
                <span class="pos-change_title">Change</span>
            </div>
            <div>
                <span class="pos-change_amount" t-esc="model.formatCurrency(order and model.getOrderChange(order) || 0)"/>
            </div>
        </div>
    </t>

</templates>
