<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="tax_report" model="account.tax.report">
        <field name="name">Declaração Periódica de IVA</field>
        <field name="country_id" ref="base.pt"/>
    </record>

    <record id="tax_report_pt_base" model="account.tax.report.line">
        <field name="name">Base</field>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
        <field name="formula">None</field>
    </record>

    <record id="tax_report_pt_base_vendas" model="account.tax.report.line">
        <field name="name">Vendas</field>
        <field name="parent_id" ref="tax_report_pt_base"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_vendas_normal" model="account.tax.report.line">
        <field name="name">Normal (Campo 3)</field>
        <field name="code">tax_report_pt_base_vendas_normal</field>
        <field name="tag_name">Campo 3</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_vendas_intermedia" model="account.tax.report.line">
        <field name="name">Intermédia (Campo 5)</field>
        <field name="code">tax_report_pt_base_vendas_intermedia</field>
        <field name="tag_name">Campo 5</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_base_vendas_reduzida" model="account.tax.report.line">
        <field name="name">Reduzida (Campo 1)</field>
        <field name="code">tax_report_pt_base_vendas_reduzida</field>
        <field name="tag_name">Campo 1</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_base_vendas_isento" model="account.tax.report.line">
        <field name="name">Isento (Campo 8)</field>
        <field name="code">tax_report_pt_base_vendas_isento</field>
        <field name="tag_name">Campo 8</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">4</field>
    </record>

    <record id="tax_report_pt_base_vendas_eu" model="account.tax.report.line">
        <field name="name">Vendas EU</field>
        <field name="code">tax_report_pt_base_vendas_eu</field>
        <field name="parent_id" ref="tax_report_pt_base"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_base_vendas_eu0" model="account.tax.report.line">
        <field name="name">Isento EU (Campo 7)</field>
        <field name="code">tax_report_pt_base_vendas_eu0</field>
        <field name="tag_name">Campo 7</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_vendas_non_eu" model="account.tax.report.line">
        <field name="name">Vendas Non-EU</field>
        <field name="code">tax_report_pt_base_vendas_non_eu</field>
        <field name="parent_id" ref="tax_report_pt_base"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_base_vendas_non_eu0" model="account.tax.report.line">
        <field name="name">Isento Non-EU</field>
        <field name="code">tax_report_pt_base_vendas_non_eu0</field>
        <field name="tag_name">Isento Non-EU</field>
        <field name="parent_id" ref="tax_report_pt_base_vendas_non_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_despesas" model="account.tax.report.line">
        <field name="name">Despesas</field>
        <field name="parent_id" ref="tax_report_pt_base"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">4</field>
    </record>

    <record id="tax_report_pt_base_despesas_normal" model="account.tax.report.line">
        <field name="name">Normal</field>
        <field name="code">tax_report_pt_base_despesas_normal</field>
        <field name="tag_name">Normal</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_despesas_intermedia" model="account.tax.report.line">
        <field name="name">Intermédia</field>
        <field name="code">tax_report_pt_base_despesas_intermedia</field>
        <field name="tag_name">Intermédia</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_base_despesas_reduzida" model="account.tax.report.line">
        <field name="name">Reduzida</field>
        <field name="code">tax_report_pt_base_despesas_reduzida</field>
        <field name="tag_name">Reduzida</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_base_despesas_isento" model="account.tax.report.line">
        <field name="name">Isento</field>
        <field name="code">tax_report_pt_base_despesas_isento</field>
        <field name="tag_name">Isento</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">4</field>
    </record>

    <record id="tax_report_pt_base_despesas_eu" model="account.tax.report.line">
        <field name="name">Despesas EU</field>
        <field name="parent_id" ref="tax_report_pt_base"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">5</field>
    </record>

    <record id="tax_report_pt_base_despesas_eu_bens" model="account.tax.report.line">
        <field name="name">Acquisições de bens EU (Campo 12)</field>
        <field name="code">tax_report_pt_base_despesas_eu_bens</field>
        <field name="tag_name">Campo 12</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_base_despesas_eu_servicos" model="account.tax.report.line">
        <field name="name">Prestações de serviços EU (Campo 16)</field>
        <field name="code">tax_report_pt_base_despesas_eu_servicos</field>
        <field name="tag_name">Campo 16</field>
        <field name="parent_id" ref="tax_report_pt_base_despesas_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_iva" model="account.tax.report.line">
        <field name="name">IVA</field>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
        <field name="formula">None</field>
    </record>

    <record id="tax_report_pt_tax_vendas" model="account.tax.report.line">
        <field name="name">Vendas</field>
        <field name="code">tax_report_pt_tax_vendas</field>
        <field name="parent_id" ref="tax_report_pt_iva"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_tax_vendas_normal" model="account.tax.report.line">
        <field name="name">Normal (Campo 4)</field>
        <field name="code">tax_report_pt_tax_vendas_normal</field>
        <field name="tag_name">Campo 4</field>
        <field name="parent_id" ref="tax_report_pt_tax_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_tax_vendas_intermedia" model="account.tax.report.line">
        <field name="name">Intermédia (Campo 6)</field>
        <field name="code">tax_report_pt_tax_vendas_intermedia</field>
        <field name="tag_name">Campo 6</field>
        <field name="parent_id" ref="tax_report_pt_tax_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_tax_vendas_reduzida" model="account.tax.report.line">
        <field name="name">Reduzida (Campo 2)</field>
        <field name="code">tax_report_pt_tax_vendas_reduzida</field>
        <field name="tag_name">Campo 2</field>
        <field name="parent_id" ref="tax_report_pt_tax_vendas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_tax_despesas" model="account.tax.report.line">
        <field name="name">Despesas</field>
        <field name="code">tax_report_pt_tax_despesas</field>
        <field name="parent_id" ref="tax_report_pt_iva"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_tax_despesas_normal" model="account.tax.report.line">
        <field name="name">Normal (Campo 22)</field>
        <field name="code">tax_report_pt_tax_despesas_normal</field>
        <field name="tag_name">Campo 22</field>
        <field name="parent_id" ref="tax_report_pt_tax_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
    </record>

    <record id="tax_report_pt_tax_despesas_intermedia" model="account.tax.report.line">
        <field name="name">Intermédia (Campo 23)</field>
        <field name="code">tax_report_pt_tax_despesas_intermedia</field>
        <field name="tag_name">Campo 23</field>
        <field name="parent_id" ref="tax_report_pt_tax_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
    </record>

    <record id="tax_report_pt_tax_despesas_reduzida" model="account.tax.report.line">
        <field name="name">Reduzida (Campo 21)</field>
        <field name="code">tax_report_pt_tax_despesas_reduzida</field>
        <field name="tag_name">Campo 21</field>
        <field name="parent_id" ref="tax_report_pt_tax_despesas"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_tax_despesas_eu" model="account.tax.report.line">
        <field name="name">Despesas EU</field>
        <field name="code">tax_report_pt_tax_despesas_eu</field>
        <field name="parent_id" ref="tax_report_pt_iva"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
    </record>

    <record id="tax_report_pt_tax_despesas_eu_bens" model="account.tax.report.line">
        <field name="name">Acquisições de bens EU (Campo 13)</field>
        <field name="code">tax_report_pt_tax_despesas_eu_bens</field>
        <field name="tag_name">Campo 13</field>
        <field name="parent_id" ref="tax_report_pt_tax_despesas_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">4</field>
    </record>

    <record id="tax_report_pt_tax_despesas_eu_servicos" model="account.tax.report.line">
        <field name="name">Prestações de serviços EU (Campo 17)</field>
        <field name="code">tax_report_pt_tax_despesas_eu_servicos</field>
        <field name="tag_name">Campo 17</field>
        <field name="parent_id" ref="tax_report_pt_tax_despesas_eu"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">5</field>
    </record>

    <record id="tax_report_pt_tax_totais" model="account.tax.report.line">
        <field name="name">TOTAIS</field>
        <field name="code">tax_report_pt_tax_totals</field>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
        <field name="formula">None</field>
    </record>

    <record id="tax_report_pt_tax_totais_base" model="account.tax.report.line">
        <field name="name">Total da base tributável (Campo 90)</field>
        <field name="parent_id" ref="tax_report_pt_tax_totais"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">1</field>
        <field name="formula">tax_report_pt_base_vendas_normal + tax_report_pt_base_vendas_intermedia + tax_report_pt_base_vendas_reduzida + tax_report_pt_base_vendas_isento + tax_report_pt_base_vendas_eu0 + tax_report_pt_base_despesas_eu_bens + tax_report_pt_base_despesas_eu_servicos</field>
    </record>

    <record id="tax_report_pt_tax_totais_iva_pagar" model="account.tax.report.line">
        <field name="name">Total do imposto a favor do sujeito passivo (Campo 91)</field>
        <field name="code">tax_report_pt_tax_totais_iva_pagar</field>
        <field name="parent_id" ref="tax_report_pt_tax_totais"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">2</field>
        <field name="formula">tax_report_pt_tax_despesas_normal + tax_report_pt_tax_despesas_intermedia + tax_report_pt_tax_despesas_reduzida</field>
    </record>

    <record id="tax_report_pt_tax_totais_iva_recuperar" model="account.tax.report.line">
        <field name="name">Total do imposto a favor do estado (Campo 92)</field>
        <field name="code">tax_report_pt_tax_totais_iva_recuperar</field>
        <field name="parent_id" ref="tax_report_pt_tax_totais"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">3</field>
        <field name="formula">tax_report_pt_tax_vendas_normal + tax_report_pt_tax_vendas_intermedia + tax_report_pt_tax_vendas_reduzida + tax_report_pt_tax_despesas_eu_bens + tax_report_pt_tax_despesas_eu_servicos</field>
    </record>

    <record id="tax_report_pt_tax_totais_pagar" model="account.tax.report.line">
        <field name="name">Imposto a entragar ao Estado (Campo 93)</field>
        <field name="code">tax_report_pt_tax_totais_pagar</field>
        <field name="parent_id" ref="tax_report_pt_tax_totais"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">4</field>
        <field name="formula">max(0, tax_report_pt_tax_totais_iva_recuperar - tax_report_pt_tax_totais_iva_pagar)</field>
    </record>

    <record id="tax_report_pt_tax_total_receber" model="account.tax.report.line">
        <field name="name">Crédito a recuperar (Campo 94)</field>
        <field name="parent_id" ref="tax_report_pt_tax_totais"/>
        <field name="report_id" ref="tax_report"/>
        <field name="sequence">5</field>
        <field name="formula">max(0, tax_report_pt_tax_totais_iva_pagar - tax_report_pt_tax_totais_iva_recuperar)</field>
    </record>
</odoo>
